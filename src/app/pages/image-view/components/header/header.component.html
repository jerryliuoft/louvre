<mat-toolbar class="flex-container space-between">
  <div class="flex-container align-items-center gap-md">
    <button
      mat-icon-button
      (click)="dialogRef.close()"
      aria-label="Icon button to go back to front page"
    >
      <mat-icon>arrow_back</mat-icon>
    </button>
    <button
      mat-icon-button
      (click)="goToFolder()"
      aria-label="Icon button to set the directory to load images"
      mat-tooltip="Go to containing folder"
    >
      <mat-icon>folder_open</mat-icon>
    </button>
    
    @if (file().faces && file().faces!.length > 0) {
      <button
        mat-icon-button
        [matMenuTriggerFor]="faceMenu"
        aria-label="Filter gallery by people in this photo"
        mat-tooltip="Show only photos of people in this image"
        color="primary"
      >
        <mat-icon>face</mat-icon>
      </button>

      <mat-menu #faceMenu="matMenu" xPosition="before">
        @for (face of file().faces; track $index) {
          <button mat-menu-item (click)="filterByFaces(face.descriptor)" style="display: flex; align-items: center; gap: 8px; width: auto; padding: 4px 16px;">
            <div style="width: 40px; height: 40px;">
              <app-face-thumbnail [fileHandle]="file().handle!" [box]="face.box"></app-face-thumbnail>
            </div>
            <span>Person {{ $index + 1 }}</span>
          </button>
        }
      </mat-menu>
    }
  </div>
  <div>
    <button
      mat-icon-button
      (click)="deleteFile()"
      aria-label="Icon button to delete the current image"
      mat-tooltip="Delete file"
      color="warn"
      style="color: #f44336;"
    >
      <mat-icon>delete</mat-icon>
    </button>
  </div>
</mat-toolbar>
